import{URL}from"./constants.js";import setData from"./setData.min.js";let userData=JSON.parse(localStorage.getItem("userData"));const results=localStorage.getItem("result"),result=document.getElementById("result"),scoreResult=document.getElementById("scoreResult"),profile=document.getElementById("profile"),startButton=document.getElementById("go"),userInfo=document.getElementById("userInfo");userInfo.innerHTML=userData?`Вітаємо, <a href='/pages/account.html'>${userData.nickname}</a>`:"",results&&(userData?scoreResult.innerHTML=`<b>, ${userData.nickname}, <br>ви набрали ${results} балів.</b>`:scoreResult.innerHTML=`<b>ви набрали ${results} балів.</b>`);const chngButton=a=>{null===a?(result.innerText="\u0429\u043E\u0431 \u043F\u043E\u0442\u0440\u0430\u043F\u0438\u0442\u0438 \u0432 \u0440\u0435\u0439\u0442\u0438\u043D\u0433, \u043D\u0435\u043E\u0431\u0445\u0456\u0434\u043D\u043E \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0443\u0432\u0430\u0442\u0438\u0441\u044F",profile.classList.add("hidden")):a.rated?result.innerText="\u041D\u0435 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u043C\u043E\u0457 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0438 \u0432 \u0437\u0430\u0433\u0430\u043B\u044C\u043D\u043E\u043C\u0443 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0443":result.innerText="\u0412\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u043C\u043E\u0457 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0438 \u0432 \u0437\u0430\u0433\u0430\u043B\u044C\u043D\u043E\u043C\u0443 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0443"};result.addEventListener("click",()=>{const a=localStorage.getItem("userId"),b=localStorage.getItem("token");if(b&&a){const c={rated:!userData.rated};setData(URL+"users/"+a,b,c).then(a=>{userData=JSON.parse(localStorage.getItem("userData"));const b=a?a:userData;chngButton(b)})}else location.href="/"}),startButton.addEventListener("click",()=>location.href="./question.html"),chngButton(userData);