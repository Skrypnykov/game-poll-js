import{apiGet}from"./getData.min.js";import{URL}from"./constants.js";const fullUrl=URL+"users",ratingOl=document.getElementById("rating-ol"),profile=document.getElementById("profile"),userInfo=document.getElementById("userInfo"),advice=document.getElementById("advice"),startButton=document.getElementById("go"),accountButton=document.getElementById("result");export async function rating(){const a=JSON.parse(localStorage.getItem("userData"));apiGet(fullUrl).then(b=>{const c=b;a?(userInfo.innerHTML=`Вітаємо, <a href='/pages/account.html'>${a.nickname}</a>`,startButton.classList.remove("hidden"),!a.verified&&(accountButton&&accountButton.classList.remove("hidden"),advice&&advice.classList.remove("hidden"))):(advice.classList.add("hidden"),userInfo.innerText="\u0412\u0456\u0442\u0430\u0454\u043C\u043E",a?profile.classList.remove("hidden"):profile.classList.add("hidden"),startButton&&startButton.classList.add("hidden"),accountButton&&accountButton.classList.add("hidden")),c&&(ratingOl.innerHTML="",c.sort((c,a)=>a.score-c.score).forEach((b,c)=>{let d=document.createElement("li");d.innerText=`${b.score} - ${b.fullname}`,a&&b.fullname===a.fullname?d.classList.add("current-user"):0!=c%2&&d.classList.add("gray-user"),ratingOl.appendChild(d)}))}).catch(a=>{console.log(a.message)})}startButton.addEventListener("click",()=>location.href="./question.html"),rating();